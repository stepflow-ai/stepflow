name: batch-workflow
description: Workflow for demonstrating batch execution across k8s pods
input:
  schema:
    type: object
    properties:
      value:
        type: number
        description: Input value to process
      iterations:
        type: number
        description: Number of iterations for compute-intensive task
        default: 1000
steps:
  process:
    component: /python/compute_intensive_task
    input:
      value:
        $input: value
      iterations:
        $input: iterations
  fibonacci:
    component: /python/fibonacci
    input:
      value:
        $step: process
        path: result
  square:
    component: /python/square
    input:
      value:
        $step: fibonacci
        path: result
output:
  original_value:
    $input: value
  processed_result:
    $step: process
    path: result
  processing_time_ms:
    $step: process
    path: processing_time_ms
  fibonacci_result:
    $step: fibonacci
    path: result
  final_result:
    $step: square
    path: result
