---
source: crates/stepflow-cli/tests/commands/test_test.rs
assertion_line: 28
info:
  program: stepflow
  args:
    - "--log-file=/dev/null"
    - "--omit-stack-trace"
    - test
    - tests/mock
  env:
    STEPFLOW_LOG_DESTINATION: ""
    STEPFLOW_LOG_FILE: ""
    STEPFLOW_LOG_FORMAT: ""
    STEPFLOW_LOG_LEVEL: ""
    STEPFLOW_OTHER_LOG_LEVEL: ""
    STEPFLOW_OTLP_ENDPOINT: ""
    STEPFLOW_TRACE_ENABLED: ""
---
success: false
exit_code: 1
----- stdout -----
----------
Running Test Case test with input 'a'
----------
Running Test Case test with input 'hello'
----------
Running Test Case test with input 'world'
tests/mock/basic.yaml: 3/3 passed
----------
Running Test Case do not skip with input 'a'
Test Case do not skip with input 'a' failed. New Output:
outcome: skipped


----------
Running Test Case skip with input 'a'
Test Case skip with input 'a' failed. New Output:
outcome: skipped


----------
Running Test Case do not skip with input 'hello'
Test Case do not skip with input 'hello' failed. New Output:
outcome: skipped


tests/mock/conditional_skip.yaml: 0/3 passed
----------
Running Test Case do not skip with input 'a'
Test Case do not skip with input 'a' failed. New Output:
outcome: skipped


----------
Running Test Case skip with input 'a'
Test Case skip with input 'a' failed. New Output:
outcome: skipped


----------
Running Test Case do not skip with input 'hello'
Test Case do not skip with input 'hello' failed. New Output:
outcome: skipped


tests/mock/conditional_skip_use_default.yaml: 0/3 passed
----------
Running Test Case test error case that should fail
----------
Running Test Case test success case
tests/mock/error_fail.yaml: 2/2 passed
----------
Running Test Case test error case that should skip
----------
Running Test Case test success case
tests/mock/error_skip.yaml: 2/2 passed
----------
Running Test Case test error case that uses default
----------
Running Test Case test success case
tests/mock/error_use_default.yaml: 2/2 passed
----------
Running Test Case test error case that uses default value
----------
Running Test Case test success case
tests/mock/error_use_default_value.yaml: 2/2 passed
----------
Running Test Case must_execute with skipIf true - step skipped, workflow succeeds
----------
Running Test Case must_execute with skipIf false - step executes and fails
Test Case must_execute with skipIf false - step executes and fails failed. New Output:
outcome: success
result: b


----------
Running Test Case must_execute input dependency required
tests/mock/must_execute_skip_if.yaml: 2/3 passed
tests/mock/basic.yaml: 3/3 passed
tests/mock/conditional_skip.yaml: 0/3 passed
tests/mock/conditional_skip_use_default.yaml: 0/3 passed
tests/mock/error_fail.yaml: 2/2 passed
tests/mock/error_skip.yaml: 2/2 passed
tests/mock/error_use_default.yaml: 2/2 passed
tests/mock/error_use_default_value.yaml: 2/2 passed
tests/mock/must_execute_skip_if.yaml: 2/3 passed

=== Test Summary ===
Files tested: 8
Total test cases: 20
Passed: 13
Failed: 7

----- stderr -----
